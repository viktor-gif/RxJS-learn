(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{120:function(e,s,a){e.exports={messagesWrap:"Messages_messagesWrap__3hUqa",messageWrap:"Messages_messageWrap__2ITiA",messageWrapOwner:"Messages_messageWrapOwner__1BnMH",userPhotoContainer:"Messages_userPhotoContainer__bsPsX",userName:"Messages_userName__2QUC_",message:"Messages_message__2b9gd",deleteMessageButton:"Messages_deleteMessageButton__1fXmX",myMessage:"Messages_myMessage__1nJmM",postsForm:"Messages_postsForm__2ae_M",messageInput:"Messages_messageInput__3otbB",sendMessage:"Messages_sendMessage__I4_8u",userPhoto:"Messages_userPhoto__qWMuV",errorMessage:"Messages_errorMessage__Vb3nM",messagesForm:"Messages_messagesForm__T1uMJ"}},121:function(e,s,a){e.exports={chatContainer:"Chat_chatContainer__1itWt",messagesWrap:"Chat_messagesWrap__11k-Z",messageWrap:"Chat_messageWrap__23j05",messageWrapOwner:"Chat_messageWrapOwner__2skcO",userPhotoContainer:"Chat_userPhotoContainer__w2vpC",userName:"Chat_userName__1NE6V",message:"Chat_message__2Jls5",myMessage:"Chat_myMessage__11ZHY",postsForm:"Chat_postsForm__MiIG0",messageInput:"Chat_messageInput__1e4d7",sendMessage:"Chat_sendMessage__1TpcS",userPhoto:"Chat_userPhoto__1UBwE",errorMessage:"Chat_errorMessage__1yGdu",messagesInputBlock:"Chat_messagesInputBlock__2qdry"}},122:function(e,s,a){e.exports={dialogsWrap:"Dialogs_dialogsWrap__2QX5N",commonChatBtn:"Dialogs_commonChatBtn__13kzD",userName:"Dialogs_userName__1f5V2",dialog:"Dialogs_dialog__3X4yL",avatar:"Dialogs_avatar__2lVKW"}},123:function(e,s,a){e.exports={messageWrap:"Message_messageWrap__fEmYW",messageWrapOwner:"Message_messageWrapOwner__3q3UV",userPhotoContainer:"Message_userPhotoContainer__4jdAY",userName:"Message_userName__1kNjM",message:"Message_message__2XQq1",menuMessage:"Message_menuMessage__2h4EW",messageTextOwner:"Message_messageTextOwner__1RC2S",menuMessageOwner:"Message_menuMessageOwner__3f0hz",deleteIconPic:"Message_deleteIconPic__2gnGz",myMessage:"Message_myMessage__3IZxD",userPhoto:"Message_userPhoto__3leSj",messagesForm:"Message_messagesForm__1N9ke",deleteShure:"Message_deleteShure__2KIt-"}},125:function(e,s,a){"use strict";a.r(s);var t=a(1),r=a.n(t),n=a(121),o=a.n(n),g=a(122),c=a.n(g),i=a(30),m=a(7),l=a(52),_=a(23),d=a(13),u=a(0),M=r.a.memo((function(e){Object(t.useEffect)((function(){e.getDialogs()}),[]);var s=Object(m.c)(),a=e.dialogs,r=null===a||void 0===a?void 0:a.map((function(s){return Object(u.jsx)(j,{id:s.id,name:s.userName,url:s.photos.small,getDialogMessages:e.getDialogMessages},s.id)}));return Object(u.jsxs)("div",{className:c.a.dialogsWrap,children:[Object(u.jsx)("div",{className:c.a.commonChatBtn,children:Object(u.jsx)(d.a,{click:function(){s(_.b.cleanDialogMessages()),s(Object(l.c)())},value:"Common chat",buttonType:"commonChat"})}),r]})})),j=r.a.memo((function(e){var s=Object(m.c)();return Object(u.jsxs)("div",{className:c.a.dialog,children:[Object(u.jsx)("div",{className:c.a.avatar,onClick:function(){s(Object(l.d)()),e.getDialogMessages(e.id),s(_.b.setDialogId(e.id)),s(Object(_.g)(e.id))},children:Object(u.jsx)("img",{src:e.url||i.a,alt:"User"})}),Object(u.jsx)("div",{className:c.a.userName,children:e.name.slice(0,5)+"..."})]})})),h=M,p=a(8),b=a(120),O=a.n(b),v=a(123),x=a.n(v),N=a(9),I=a.p+"static/media/delete-icon.4663c0b5.png",C=r.a.memo((function(e){var s=e.isMe?e.recipientId:e.senderId;return Object(u.jsxs)("div",{className:x.a.messageWrap+" "+(e.isMe&&x.a.messageWrapOwner),children:[Object(u.jsx)("div",{className:x.a.userPhotoContainer,children:Object(u.jsx)(N.b,{to:"/profile/".concat(e.id),children:Object(u.jsx)("img",{className:x.a.userPhoto,src:e.ava||i.a,alt:"AVA"})})}),Object(u.jsx)("div",{className:x.a.userName,children:e.userName}),Object(u.jsxs)("div",{className:x.a.message+" "+(e.isMe&&x.a.myMessage),children:[Object(u.jsx)("span",{className:x.a.messageText+" "+(e.isMe&&x.a.messageTextOwner),children:e.message}),"dialog"===e.messageType&&Object(u.jsx)("div",{className:x.a.menuMessage+" "+(e.isMe&&x.a.menuMessageOwner),children:Object(u.jsx)("img",{className:x.a.deleteIconPic,src:I,onClick:function(){e.deleteMessage(e.id,s)}})})]})]})})),f=a(64),W=r.a.memo((function(e){var s=Object(t.useState)(""),a=Object(p.a)(s,2),r=a[0],n=a[1],o=Object(t.useState)(null),g=Object(p.a)(o,2),c=g[0],i=g[1],M=Object(m.c)();return Object(u.jsxs)("div",{className:O.a.messagesForm,children:[Object(u.jsx)("div",{className:O.a.messageInput,children:Object(u.jsx)(f.a,{value:r,onChange:function(e){n(e.target.value)}})}),Object(u.jsx)("div",{className:O.a.errorMessage,children:c}),Object(u.jsx)(d.a,{click:function(){!r||r.length<1?i("You can not send an empty message"):r.length>=100?i("Max length is 100 symbols"):(e.chatMessages?M(Object(l.b)(r)):M(Object(_.f)(r,e.currentDialogId)),n(""),i(null))},value:"Send message",buttonType:"sendMessage",disabled:!!e.chatMessages&&"ready"!==e.status})]})})),w=r.a.memo((function(e){var s,a,r=Object(t.useState)(!0),n=Object(p.a)(r,2),o=n[0],g=n[1],c=Object(t.useRef)(null);Object(t.useEffect)((function(){var e;o&&(null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e.chatMessages,e.dialogMessages]);var m=null===(s=e.chatMessages)||void 0===s?void 0:s.map((function(s){return Object(u.jsx)(C,{id:s.userId,isMe:s.userId===e.ownerId,message:s.message,ava:s.photo,userName:s.userName,messageType:"commonChat",deleteMessage:e.deleteMessage,senderId:1,recipientId:1},s.id)})),l=null===(a=e.dialogMessages)||void 0===a?void 0:a.map((function(s){return Object(u.jsx)(C,{id:s.id,isMe:s.senderId===e.ownerId,message:s.body,ava:i.a,userName:s.senderName,messageType:"dialog",deleteMessage:e.deleteMessage,senderId:s.senderId,recipientId:s.recipientId},s.id.toString())}));e.status&&"error"===e.status&&console.log("Error Chat");return Object(u.jsxs)("div",{className:O.a.messagesWithInput,children:[Object(u.jsxs)("div",{className:O.a.messagesWrap,onScroll:function(e){g(!1),e.target.scrollTopMax-e.target.scrollTop<100&&g(!0)},children:["error"===(e.status&&e.status)&&Object(u.jsx)("div",{style:{color:"red",fontSize:"20px"},children:"Some error"}),m||l,Object(u.jsx)("div",{ref:c})]}),Object(u.jsx)(W,{currentDialogId:e.currentDialogId,chatMessages:e.chatMessages,status:e.status})]})})),y=r.a.memo((function(e){return Object(u.jsxs)("div",{className:o.a.chatContainer,children:[Object(u.jsx)(h,{dialogs:e.dialogs,getDialogs:e.getDialogs,getDialogMessages:e.getDialogMessages}),Object(u.jsx)(w,{chatMessages:e.chatMessages,dialogMessages:e.dialogMessages,status:e.chatStatus,ownerId:e.ownerId,currentDialogId:e.currentDialogId,deleteMessage:e.deleteMessage})]})}));s.default=y}}]);
//# sourceMappingURL=3.582bab0a.chunk.js.map